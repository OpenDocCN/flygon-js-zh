# 前言

在计算机编程中，范式层出不穷：一些例子包括命令式编程、结构化（*少用 goto*）编程、面向对象编程、面向方面编程和声明式编程。最近，对一种可以说比大多数（如果不是全部）上述范式更古老的范式重新产生了兴趣——函数式编程。**函数式编程**（**FP**）强调编写函数，并以简单的方式连接它们，以产生更易理解和更易测试的代码。因此，鉴于今天的 Web 应用程序的复杂性增加，逻辑上会对更安全、更清洁的编程方式产生兴趣。

对 FP 的兴趣与 JavaScript 的发展息息相关。尽管 JavaScript 的创建有些仓促（据说是由 Netscape 的 Brendan Eich 在 1995 年仅用了 10 天完成），但今天它是一种标准化和迅速增长的语言，具有比大多数其他类似流行语言更先进的特性。这种语言的普及性，现在可以在浏览器、服务器、手机等各种设备上找到，也推动了对更好的开发策略的兴趣。此外，即使 JavaScript 本身并不是作为一种函数语言而构思的，事实上它提供了你在这种方式下所需的所有功能，这也是一个优点。

还必须说一下，FP 并没有被广泛应用于工业中，可能是因为它有一定的难度，被认为是*理论性*而不是*实用性*，甚至*数学性*，可能使用的词汇和概念对开发人员来说是陌生的——函子？单子？折叠？范畴论？虽然学习所有这些理论肯定会有所帮助，但也可以说，即使对上述术语一无所知，你也可以理解 FP 的原则，并看到如何将其应用于你的编程。

FP 不是你必须独自完成的事情，没有任何帮助。有许多库和框架，以不同程度融合了 FP 的概念。从 jQuery 开始（其中包括一些 FP 概念），经过 Underscore 及其近亲 LoDash，或其他库如 Ramda，再到更完整的 Web 开发工具如 React 和 Redux，Angular，或 Elm（一种 100%的函数语言，可以编译成 JavaScript），用于编码的功能性辅助工具列表不断增长。

学习如何使用 FP 可能是一项值得投资的事情，即使你可能无法使用其所有方法和技术，只要开始应用其中的一些方法，就会在编写更好的代码方面获得回报。你不需要从一开始就尝试应用 FP 的所有内容，也不需要试图放弃语言中的每一个非函数特性。JavaScript 确实有一些不好的特性，但也有一些非常好和强大的特性。关键不是要抛弃你学到的和使用的一切，然后采用 100%的函数式方式；相反，指导思想是*演变，而不是革命*。在这个意义上，可以说我们要做的不是 FP，而是**有点函数式编程**（**SFP**），旨在融合不同的范式。

关于本书中代码风格的最后一点评论——确实有一些非常好的库，可以为你提供函数式编程工具：Underscore、LoDash、Ramda 等等。然而，我更倾向于避免使用它们，因为我想展示事物的真实运行方式。应用某个包中的给定函数很容易，但通过编写所有代码（如果你愿意，可以称之为*纯 FP*），我相信你可以更深入地理解事物。此外，正如我在某些地方所评论的，由于箭头函数和其他特性的强大和清晰，*纯 JS*版本甚至更容易理解！

# 本书涵盖的内容

在本书中，我们将以实际的方式涵盖**函数式编程**（**FP**），尽管有时我们会提到一些理论观点：

第一章，*成为函数式-几个问题*，讨论了函数式编程，给出了使用它的原因，并列出了您需要利用本书其余部分的工具。

第二章，*功能性思维-第一个例子*，将通过考虑一个常见的与 Web 相关的问题，并讨论几种解决方案，最终专注于一种功能性的方式，提供了函数式编程的第一个例子。

第三章，*从函数开始-核心概念*，将介绍函数式编程的核心概念：函数，以及 JavaScript 中的不同选项。

第四章，*行为得体-纯函数*，将考虑纯度和纯函数的概念，并展示它如何导致更简单的编码和更容易的测试。

第五章，*声明式编程-更好的风格*，将使用简单的数据结构来展示如何以声明式的方式工作，而不是以命令式的方式。

第六章，*生成函数-高阶函数*，将处理高阶函数，它们接收其他函数作为参数，并产生新的函数作为结果。

第七章，*转换函数-柯里化和部分应用*，将展示一些从早期函数中产生新的专门函数的方法。

第八章，*连接函数-管道和组合*，将展示如何通过连接先前定义的函数来构建新函数的关键概念。

第九章，*设计函数-递归*，将展示函数式编程中的关键概念递归如何应用于设计算法和函数。

第十章，*确保纯净性-不可变性*，将展示一些工具，可以通过提供不可变对象和数据结构来帮助您以纯净的方式工作。

第十一章，*实现设计模式-函数式方式*，将展示在以函数式方式编程时如何实现（或不需要！）几种流行的面向对象设计模式。

第十二章，*构建更好的容器-函数数据类型*，将展示更高级的函数模式，介绍类型、容器、函子、单子以及其他更高级的函数式编程概念。

我试图保持示例简单和贴近实际，因为我想专注于功能方面，而不是纠缠于这个或那个问题的复杂性。有些编程文本是针对学习某个框架，然后解决特定问题，看如何用所选工具完全解决它。 （事实上，在规划这本书的最初阶段，我曾经考虑过开发一个应用程序，该应用程序将使用我心目中的所有函数式编程的东西，但是没有办法将所有内容都放入一个项目中。夸张一点说，我感觉自己像是一名医生，试图找到一个可以应用他所有医学知识和治疗方法的病人！）因此，我选择展示大量的个别技术，这些技术可以在多种情况下使用。我不想建造一座房子，我想向您展示如何把砖块放在一起，如何连接线路等，这样您就可以根据需要应用任何内容。

# 您需要为本书做好准备

要理解本书中的概念和代码，您不需要比 JavaScript 环境和文本编辑器更多的东西。老实说，我甚至开发了一些完全在线工作的示例，使用诸如 JSFiddle（在[`jsfiddle.net/`](https://jsfiddle.net/)）之类的工具，绝对没有其他东西。

然而，您需要一些关于最新版本的 JavaScript 的经验，因为它包括一些功能，可以帮助编写更简洁、更紧凑的代码。我们将经常包含指向在线文档的指针，例如 MDN（Mozilla Development Network）上可用的文档，以帮助您获得更深入的知识。

# 这本书是为谁准备的

这本书面向具有良好的 JavaScript 工作知识的程序员，无论是在客户端（浏览器）还是服务器端（Node.JS）工作，他们有兴趣应用技术来编写更好、可测试、可理解和可维护的代码。一些计算机科学背景（包括例如数据结构）和良好的编程实践也会派上用场。

# 约定

在这本书中，您将找到许多文本样式，用于区分不同类型的信息。以下是这些样式的一些示例以及它们的含义解释。

文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄显示如下：“只需将要激活的图层的名称分配给`VK_INSTANCE_LAYERS`环境变量”。

代码块设置如下：

```js
{
 if( (result != VK_SUCCESS) || 
 (extensions_count == 0) ) { 
 std::cout << "Could not enumerate device extensions." << std::endl; 
 return false;
} 
```

任何命令行输入或输出都以以下方式编写：

```js
setx VK_INSTANCE_LAYERS VK_LAYER_LUNARG_api_dump;VK_LAYER_LUNARG_core_validation
```

**新术语**和**重要单词**以粗体显示。您在屏幕上看到的单词，例如菜单或对话框中的单词，会在文本中出现，就像这样：“从管理面板中选择系统信息”。

警告或重要说明会出现在这样的框中。提示和技巧会出现在这样。
