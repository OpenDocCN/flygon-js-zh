# 第一章。面向对象的 JavaScript

自 Web 早期以来，人们就需要更动态和响应迅速的界面。阅读静态 HTML 文本页面是可以的，而且当它们通过 CSS 精美呈现时更好，但在浏览器中与应用程序进行互动，如电子邮件、日历、银行业务、购物、绘图、游戏和文本编辑，会更有趣。所有这些都得益于 JavaScript，这是 Web 的编程语言。JavaScript 始于嵌入 HTML 中的简单一行代码，但现在以更复杂的方式使用。开发人员利用语言的面向对象特性构建可重用部分组成的可扩展代码架构。

如果您看一下 Web 开发中过去和现在的热词，DHTML、Ajax、Web 2.0、HTML5，它们本质上都意味着 HTML、CSS 和 JavaScript——HTML 用于**内容**，CSS 用于**呈现**，JavaScript 用于**行为**。换句话说，JavaScript 是使一切协同工作的粘合剂，这样我们就可以构建丰富的 Web 应用程序。

然而，这还不是全部；JavaScript 不仅仅可以用于 Web。

JavaScript 程序在主机环境中运行。Web 浏览器是最常见的环境，但不是唯一的环境。使用 JavaScript，您可以创建各种小部件、应用程序扩展和其他软件，稍后您将看到。学习 JavaScript 是一个明智的投资；您学习一种语言，然后可以编写在多个平台上运行的各种不同的应用程序，包括移动和服务器端应用程序。如今，可以说 JavaScript 无处不在。

本书从零开始，不假设除了对 HTML 的一些基本理解之外，读者具有任何先前的编程知识。虽然有一章专门讲解 Web 浏览器环境，但本书的其余部分都是关于 JavaScript 的一般知识，因此适用于所有环境。

让我们从以下内容开始：

+   JavaScript 背后故事的简要介绍

+   在面向对象编程讨论中会遇到的基本概念

# 一点历史

最初，Web 不过是一系列以静态 HTML 文档形式连接在一起的科学出版物。信不信由你，曾经有一段时间页面上无法放置图像。然而，这很快就改变了。随着 Web 的普及和规模的扩大，创建 HTML 页面的网站管理员感到他们需要更多的东西。他们想要创建更丰富的用户交互，主要是出于希望为简单任务（如表单验证）节省服务器往返时间的愿望。出现了两个选择——Java 小程序和 LiveScript，这是 Brendan Eich 于 1995 年在*Netscape*构思的一种语言，后来被包含在 Netscape 2.0 浏览器中，名为 JavaScript。

小程序并没有完全流行起来，但 JavaScript 却流行起来了。网站管理员社区欣然接受了在 HTML 文档中嵌入的简短代码片段，并改变了本来静态的 Web 页面元素。很快，竞争对手浏览器供应商微软发布了带有 JScript 的**Internet Explorer**（**IE**）3.0，这是 JavaScript 的一个反向工程版本，还加入了一些 IE 特定的功能。最终，有人努力标准化语言的各种实现，这就是 ECMAScript 诞生的原因。**欧洲计算机制造商协会**（**ECMA**）创建了名为 ECMA-262 的标准，描述了 JavaScript 编程语言的核心部分，而没有浏览器和网页特定的功能。

您可以将 JavaScript 视为涵盖以下三个部分的术语：

+   **ECMAScript**：核心语言——变量、函数、循环等。这部分与浏览器无关，这种语言可以在许多其他环境中使用。

+   **文档对象模型**（**DOM**）：它提供了处理 HTML 和 XML 文档的方法。最初，JavaScript 只能对页面上可脚本化的内容进行有限的访问，主要是表单、链接和图像。后来，它被扩展为使所有元素都可以进行脚本化。这导致了 W3C 制定 DOM 标准，作为一种独立于语言的（不再与 JavaScript 绑定）操纵结构化文档的方式。

+   **浏览器对象模型**（**BOM**）：这是一组与浏览器环境相关的对象，直到 HTML5 开始标准化一些跨浏览器存在的常见对象之前，它从未成为任何标准的一部分。

虽然本书有一章专门讲述浏览器、DOM 和 BOM，但本书的大部分内容描述了核心语言，并教授了你可以在任何 JavaScript 程序运行的环境中使用的技能。

## 浏览器战争和复兴

不管好坏，JavaScript 的即时流行发生在浏览器战争 I 时期（大约 1996 年至 2001 年）。那是在最初的互联网繁荣时期，两大浏览器供应商网景和微软正在争夺市场份额。他们不断为他们的浏览器和 JavaScript、DOM 和 BOM 的版本添加更多的花哨功能，这自然导致了许多不一致性。在添加更多功能的同时，浏览器供应商在提供适当的开发和调试工具以及充分的文档方面落后了。开发经常是一种痛苦；你在一个浏览器中测试脚本，一旦开发完成，你在另一个浏览器中测试，结果发现你的脚本无缘无故地失败，你能得到的最好结果就是一个晦涩的错误消息，比如操作中止。

不一致的实现、缺失的文档和不合适的工具让 JavaScript 显得如此不堪，以至于许多程序员根本不愿意费心去处理它。

另一方面，试图尝试使用 JavaScript 进行实验的开发人员有些过分，他们在页面上添加了太多的特效，而并不太关心最终结果的可用性。开发人员渴望利用浏览器提供的每一种新可能性，结果最终在他们的网页上添加了诸如状态栏中的动画、闪烁的颜色、闪烁的文本、跟踪鼠标光标的对象等许多创新，实际上却损害了用户体验。这些滥用 JavaScript 的方式现在大多已经消失，但它们是语言声誉不佳的原因之一。许多严肃的程序员认为 JavaScript 只是设计师玩耍的玩具，并认为它不适合严肃的应用程序。JavaScript 的反弹导致一些网络项目完全禁止任何客户端编程，只信任可预测和严格控制的服务器。而且，为什么要将交付成品的时间加倍，然后花费额外的时间来调试不同浏览器的问题呢？

一切在浏览器战争结束后的几年里发生了改变。一些事件以积极的方式重塑了网络开发的格局。其中一些如下：

+   微软在 IE6 推出后赢得了这场战争，当时是最好的浏览器，多年来他们停止了 Internet Explorer 的开发。这给其他浏览器赶上甚至超越 IE 的能力提供了时间。

+   网络标准的运动被开发人员和浏览器供应商所接受。自然地，开发人员不喜欢为了应对浏览器的差异而编写两次（或更多次）代码；因此，他们喜欢有一套大家都会遵循的约定标准的想法。

+   开发人员和技术不断成熟，越来越多的人开始关注可用性、渐进增强技术和可访问性等问题。诸如 Firebug 之类的工具使开发人员更加高效，开发变得不那么痛苦。

在这种更健康的环境中，开发人员开始发现使用已经可用的工具的新方法和更好的方法。在 Gmail 和 Google Maps 等富有客户端编程的应用程序公开发布后，人们开始意识到 JavaScript 是一种成熟的、在某些方面独特的、强大的原型对象导向语言。其重新发现的最好例子是`XMLHttpRequest`对象提供的功能的广泛采用，这个对象曾经是 IE 独有的创新，但后来被大多数其他浏览器实现。`XMLHttpRequest`对象允许 JavaScript 发出 HTTP 请求，并从服务器获取新内容，以便更新页面的某些部分而无需完全重新加载页面。由于广泛使用`XMLHttpRequest`对象，一种新型的类似桌面的 Web 应用程序，称为 Ajax 应用程序，诞生了。

## 现在

关于 JavaScript 的一个有趣之处是它总是在主机环境中运行。Web 浏览器只是其中一个可用的主机。JavaScript 也可以在服务器、桌面和移动设备上运行。今天，您可以使用 JavaScript 执行以下所有操作：

+   创建丰富而强大的 Web 应用程序（在 Web 浏览器内运行的应用程序）。HTML5 的增加，如应用程序缓存、客户端存储和数据库，使浏览器编程对在线和离线应用程序都变得越来越强大。Chrome WebKit 的强大增加还包括对服务工作者和浏览器推送通知的支持。

+   使用`Node.js`编写服务器端代码，以及可以在 Rhino（用 Java 编写的 JavaScript 引擎）上运行的代码。

+   制作移动应用程序；您可以使用**PhoneGap**或**Titanium**完全使用 JavaScript 为 iPhone、Android 和其他手机和平板电脑创建应用程序。此外，为移动电话的 Firefox OS 应用程序完全由 JavaScript、HTML 和 CSS 创建。来自 Facebook 的 React Native 是一种令人兴奋的新方法，可以使用 JavaScript 开发本机 iOS、Android 和 Windows（实验性）应用程序。

+   使用基于 ECMAScript 的 ActionScript 创建丰富的媒体应用程序，如 Flash 或 Flex。

+   使用**Windows Scripting Host**（**WSH**）或 WebKit 的**JavaScriptCore**在桌面上编写命令行工具和脚本，以自动化管理任务。这些工具在所有 Mac 上都可用。

+   为大量桌面应用程序编写扩展和插件，如 Dreamweaver、Photoshop 和大多数其他浏览器。

+   使用 Mozilla 的**XULRunner**和**Electron**创建跨操作系统的桌面应用程序。Electron 用于构建一些最受欢迎的桌面应用程序，如 Slack、Atom 和 Visual Studio Code。

+   另一方面，**Emscripten**允许用 C/C++编写的代码编译成`asm.js`格式，然后在浏览器内运行。

+   像**PhantomJS**这样的测试框架是使用 JavaScript 编程的。

+   这绝不是一个详尽的列表。JavaScript 最初在网页内部开始，但今天可以说它几乎无处不在。此外，浏览器供应商现在将速度作为竞争优势，并竞相创建最快的 JavaScript 引擎，这对用户和开发人员都是好事，并为 JavaScript 在图像、音频和视频处理以及游戏开发等新领域的更强大用途打开了大门。

## 未来

我们只能推测未来会是什么样子，但可以肯定的是它将包括 JavaScript。有一段时间，JavaScript 可能被低估和低使用（或者可能在错误的方式上被过度使用），但每天我们都见证语言在更有趣和创造性的方式中得到新的应用。一切都始于简单的一行代码，通常嵌入在 HTML 标签属性中，比如`onclick`。如今，开发人员发布复杂、设计良好、可扩展的应用程序和库，通常支持单个代码库的多个平台。JavaScript 确实被认真对待，开发人员开始重新发现并越来越多地享受其独特的特性。

曾经在招聘职位的 nice-to-have 部分列出，如今，对 JavaScript 的了解往往是招聘 Web 开发人员时的决定性因素。今天你可能会听到的常见面试问题包括- JavaScript 是一种面向对象的语言吗？好的。那么，在 JavaScript 中如何实现继承？阅读完本书后，你将准备好在 JavaScript 面试中脱颖而出，甚至用一些他们可能不知道的知识来给面试官留下深刻印象。

# ECMAScript 5

ECMAScript 修订中最重要的里程碑是**ECMAScript 5**（**ES5**），于 2009 年 12 月正式被接受。ECMAScript 5 标准在所有主要浏览器和服务器端技术上都得到了实施和支持。

ES5 是一个重大的修订，因为除了一些重要的语法变化和标准库的添加之外，ES5 还在语言中引入了几个新的构造。

例如，ES5 引入了一些新的对象和属性，以及所谓的**严格**模式。严格模式是语言的一个子集，排除了已弃用的特性。严格模式是选择加入的，不是必须的，这意味着如果你希望你的代码在严格模式下运行，你将使用以下字符串声明你的意图（每个函数一次，或整个程序一次）：

```js
    "use strict"; 

```

这只是一个 JavaScript 字符串，将字符串漂浮在任何变量之外是可以的。因此，不支持 ES5 的旧版浏览器将简单地忽略它，因此这种严格模式是向后兼容的，不会破坏旧版浏览器。

为了向后兼容，本书中的所有示例都适用于 ES3，但与此同时，本书中的所有代码都是这样编写的，以便在 ES5 的严格模式下不会出现警告。此外，任何 ES5 特定的部分都将被清楚地标记出来。附录 C，*内置对象*，详细列出了 ES5 的新添加。

## ES6 中的严格模式

虽然 ES5 中的严格模式是可选的，但所有 ES6 模块和类默认都是严格模式。正如你很快会看到的，我们在 ES6 中编写的大部分代码都驻留在一个模块中；因此，默认情况下强制执行严格模式。然而，重要的是要理解，所有其他构造都没有隐式的严格模式强制执行。曾经有努力使新的构造，比如箭头和生成器函数，也强制执行严格模式，但后来决定这样做会导致非常分散的语言规则和代码。

# ECMAScript 6

ECMAScript 6 修订花了很长时间才完成，最终于 2015 年 6 月 17 日被接受。ES6 的特性正在逐渐成为主要浏览器和服务器技术的一部分。可以使用转译器将 ES6 编译为 ES5，并在尚未完全支持 ES6 的环境中使用该代码（我们稍后将详细讨论转译器）。

ES6 大大升级了 JavaScript 作为一种语言，并带来了非常令人兴奋的语法变化和语言构造。总的来说，这个 ECMAScript 修订中有两种基本的变化，如下所示：

+   改进了现有功能的语法和标准库的版本；例如，类和承诺

+   新的语言特性；例如，生成器

ES6 允许您以不同的方式思考您的代码。新的语法变化可以让您编写更清洁、更易于维护的代码，而且不需要特殊的技巧。语言本身现在支持了以前需要第三方模块的几种构造。ES6 引入的语言变化需要认真重新考虑我们一直以来在 JavaScript 中编码的方式。

关于命名法-ECMAScript 6、ES6 和 ECMAScript 2015 是相同的，但可以互换使用。

## ES6 的浏览器支持

大多数浏览器和服务器框架都在逐步实现 ES6 功能。您可以通过点击[`kangax.github.io/compat-table/es6/`](http://kangax.github.io/compat-table/es6/)来查看支持和不支持的内容。

尽管并非所有浏览器和服务器框架都完全支持 ES6，但我们可以借助转译器几乎使用 ES6 的所有功能。转译器是源到源编译器。ES6 转译器允许您以 ES6 语法编写代码，并将其编译/转换为等效的 ES5 语法，然后可以在不支持整个 ES6 功能范围的浏览器上运行。

目前事实上的 ES6 转译器是 Babel。在本书中，我们将使用 Babel 来编写和测试我们的示例。

## Babel

Babel 几乎支持所有 ES6 功能，可以直接使用或使用自定义插件。Babel 可以从各种构建系统、框架和语言到模板引擎中使用，并且具有良好的命令行和 REPL 内置。

要了解 Babel 如何将 ES6 代码转译为其 ES5 等效形式，请转到 Babel REPL（[`babeljs.io/repl/`](http://babeljs.io/repl/)）。

Babel REPL 允许您快速测试 ES6 的小片段。当您在浏览器中打开 Babel REPL 时，您会看到一些 ES6 代码默认在那里。在左窗格中，删除代码并输入以下文本：

```js
    var name = "John", mood = "happy"; 
    console.log(`Hey ${name}, are you feeling ${mood} today?`) 

```

当您输入此内容并从左窗格切换时，您将看到 REPL 将此 ES6 代码转换为以下代码：

```js
    "use strict"; 
    var name = "John", 
      mood = "happy"; 
    console.log("Hey " + name + ", 
      are you feeling " + mood + " today?"); 

```

这是我们在左窗格中早些时候编写的代码的 ES5 等效代码。您可以看到右窗格中的结果代码是熟悉的 ES5。正如我们所说，Babel REPL 是一个尝试和实验各种 ES6 构造的好地方。然而，我们需要 babel 自动将您的 ES6 代码转译成 ES5，为此，您可以将 Babel 包含到您现有的构建系统或框架中。

让我们首先安装 Babel 作为一个命令行工具。为此，我们将假设您熟悉 node 和 Node Package Manager（npm）。使用`npm`安装 Babel 很容易。让我们首先创建一个目录，我们将在其中安装 Babel 作为一个模块和其余的源代码。在我的 Mac 上，以下命令将创建一个名为`babel_test`的目录，使用`npm init`初始化项目，并使用`npm`安装 Babel 命令行：

```js
 **mkdir babel_test**
 **cd babel_test && npm init**
 **npm install --save-dev babel-cli**

```

如果您熟悉`npm`，您可能会想要全局安装 Babel。但是，通常不建议将 Babel 安装为全局模块。一旦您在项目中安装了 Babel，您的`package.json`文件将看起来像以下代码块：

```js
    { 
      "name": "babel_test", 
      "version": "1.0.0", 
      "description": "", 
      "main": "index.js", 
      "scripts": { 
        "test": "echo "Error: no test specified" && exit 1" 
      }, 
      "author": "", 
      "license": "ISC", 
      "devDependencies": { 
        "babel-cli": "⁶.10.1" 
      } 
    } 

```

您可以看到为 Babel 创建了一个版本大于 6.10.1 的开发依赖项。您可以通过从命令行调用它或作为构建步骤的一部分来使用 Babel 来转译您的代码。对于任何非平凡的工作，您将需要后一种方法。要在项目构建步骤的一部分调用 Babel，您可以将一个`build`步骤添加到您的`package.json`文件的`script`标签中，例如：

```js
    "scripts": { 
      "build": "babel src -d lib" 
    }, 

```

当您执行 npm build 时，Babel 将在您的`src`目录上调用，并将转译后的代码放在`lib`目录中。或者，您也可以通过编写以下命令手动运行 Babel：

```js
 **$ ./node_modules/.bin/babel src -d lib**

```

我们将在本书的后面讨论各种 Babel 选项和插件。本节将使您能够开始探索 ES6。

# 面向对象编程

在深入研究 JavaScript 之前，让我们花点时间回顾一下人们在说到面向对象时指的是什么，以及这种编程风格的主要特点是什么。以下是在谈论**面向对象编程**（**OOP**）时最常用的概念列表：

+   对象，方法和属性

+   类

+   封装

+   聚合

+   可重用性/继承

+   多态性

让我们更仔细地看看这些概念中的每一个。如果您对面向对象编程术语感到陌生，这些概念可能听起来太理论化，您可能会在一次阅读中难以理解或记住它们。不要担心，这需要几次尝试，而且从概念层面上来说，这个主题可能有点枯燥。但是，我们将在本书的后面看到大量的代码示例，您会发现实际上事情要简单得多。

## 对象

正如名字所暗示的那样，对象很重要。对象是事物（某人或某物）的表示，这种表示是通过编程语言来表达的。事物可以是任何东西，现实生活中的对象，或者更复杂的概念。以常见的对象猫为例，您可以看到它具有某些特征-颜色，名称，重量等，并且可以执行一些动作-喵喵叫，睡觉，躲藏，逃跑等。对象的特征在面向对象编程中称为属性，动作称为方法。

与口语的类比如下：

+   对象通常使用名词命名，例如书，人等

+   方法是动词，例如读，运行等

+   属性的值是形容词

以句子“黑猫睡在垫子上”为例。 “猫”（名词）是对象，“黑色”（形容词）是颜色属性的值，“睡觉”（动词）是面向对象编程中的动作或方法。为了类比，我们可以再进一步说“在垫子上”指定了关于动作“睡觉”的一些内容，因此它充当了传递给`sleep`方法的参数。

## 类

在现实生活中，可以根据某些标准对类似的对象进行分组。蜂鸟和老鹰都是鸟类，因此它们可以被归类为某个虚构的`Birds`类。在面向对象编程中，类是对象的蓝图或配方。对象的另一个名称是实例，因此我们可以说老鹰是`Birds`类的一个具体实例。您可以使用相同的类创建不同的对象，因为类只是一个模板，而对象是基于模板的具体实例。

JavaScript 和经典的面向对象语言（如 C++和 Java）之间存在差异。您应该从一开始就意识到，在 JavaScript 中，没有类；一切都基于对象。 JavaScript 具有原型的概念，它们也是对象（我们稍后将详细讨论它们）。在经典的面向对象语言中，您会说类似于-为我创建一个名为`Bob`的新对象，它属于`Person`类。在原型面向对象语言中，您会说-我将采用我已经准备好的 Bob 爸爸对象（在电视前的沙发上？）并将其重用作我将称之为`Bob`的新对象的原型。

## 封装

封装是另一个与面向对象编程相关的概念，它说明了一个对象包含（封装）以下内容：

+   数据（存储在属性中）

+   使用方法对数据进行操作

封装是与封装相配的另一个术语。这是一个相当广泛的术语，可能意味着不同的事情，但让我们看看人们在面向对象编程的上下文中使用它时通常指的是什么。

想象一个对象，比如 MP3 播放器。作为对象的用户，您被赋予一些接口来使用，例如按钮，显示屏等。您使用接口来使对象对您有用，比如播放一首歌。设备内部的工作方式，您不知道，而且通常也不关心。换句话说，接口的实现对您是隐藏的。当您的代码通过调用其方法使用对象时，面向对象编程中也会发生同样的事情。您的代码不需要知道方法内部是如何工作的，无论您自己编写了对象还是它来自某个第三方库；您的代码都不需要知道方法的内部工作方式。在编译语言中，您实际上无法阅读使对象工作的代码。在 JavaScript 中，因为它是一种解释性语言，您可以看到源代码，但概念仍然是一样的-您使用对象的接口而不用担心其实现。

信息隐藏的另一个方面是方法和属性的可见性。在某些语言中，对象可以具有`public`、`private`和`protected`方法和属性。这种分类定义了对象用户的访问级别。例如，只有相同对象的方法才能访问`private`方法，而任何人都可以访问`public`方法。在 JavaScript 中，所有方法和属性都是`public`，但我们将看到有方法来保护对象内部的数据并实现隐私。

## 聚合

将几个对象组合成一个新对象称为聚合或组合。这是将问题分解为更小且更易管理的部分的强大方式（分而治之）。当问题范围如此复杂以至于不可能在整体上以详细级别考虑它时，您可以将问题分解为几个较小的领域，可能然后将每个领域分解为更小的部分。这使您可以在几个抽象级别上考虑问题。

例如，个人计算机。这是一个复杂的对象。您无法考虑启动计算机时需要发生的所有事情。但是，您可以抽象地说，您需要初始化`Computer`对象包含的所有单独对象，`Monitor`对象，`Mouse`对象，`Keyboard`对象等。然后，您可以深入研究每个子对象。通过组装可重用部分，您可以组合复杂对象。

再举一个类比，一个`Book`对象可以包含（聚合）一个或多个`Author`对象，一个`Publisher`对象，几个`Chapter`对象，一个`TOC`（目录）等。

## 继承

继承是重用现有代码的一种优雅方式。例如，您可以拥有一个通用对象`Person`，它具有诸如`name`和`date_of_birth`之类的属性，并且还实现了`walk`、`talk`、`sleep`和`eat`功能。然后，您发现自己需要另一个名为`Programmer`的对象。您可以重新实现`Person`对象具有的所有方法和属性，但更明智的做法是只说`Programmer`对象继承了`Person`对象，并节省一些工作。 `Programmer`对象只需要实现更具体的功能，例如`writeCode`方法，同时重用`Person`对象的所有功能。

在经典面向对象编程中，类继承自其他类，但在 JavaScript 中，由于没有类，对象继承自其他对象。

当一个对象从另一个对象继承时，通常会向继承的方法中添加新方法，从而扩展旧对象。通常，以下短语可以互换使用-B 从 A 继承和 B 扩展 A。此外，继承的对象可以选择一个或多个方法并重新定义它们，根据自己的需要进行定制。这样，接口保持不变，方法名相同，但在新对象上调用时，方法的行为会有所不同。重新定义继承方法的工作方式的这种方式被称为**重写**。

## 多态性

在前面的例子中，一个`Programmer`对象继承了父对象`Person`的所有方法。这意味着两个对象都提供了`talk`方法，以及其他方法。现在想象一下，在你的代码中的某个地方，有一个名为`Bob`的变量，碰巧你不知道`Bob`是一个`Person`对象还是一个`Programmer`对象。你仍然可以在`Bob`对象上调用`talk`方法，代码将正常工作。在不同对象上调用相同的方法，并让它们以自己的方式做出响应的能力，称为多态性。

# OOP 总结

以下是一个快速总结迄今为止讨论的概念的表格：

| **特征** | **说明概念** |
| --- | --- |
| Bob 是一个男人（一个对象）。 | 对象 |
| Bob 的出生日期是 1980 年 6 月 1 日，性别-男性，头发-黑色。 | 属性 |
| Bob 可以吃饭，睡觉，喝水，做梦，交谈，计算自己的年龄。 | 方法 |
| Bob 是`Programmer`类的一个实例。 | 类（在经典 OOP 中） |
| Bob 基于另一个名为`Programmer`的对象。 | 原型（在原型 OOP 中） |
| Bob 保存数据，比如`birth_date`，以及处理这些数据的方法，比如`calculateAge()`。 | 封装 |
| 你不需要知道计算方法是如何内部工作的。对象可能有一些私有数据，比如闰年二月的天数。你不知道，也不想知道。 | 信息隐藏 |
| Bob 是`WebDevTeam`对象的一部分，与 Jill 一起，她是`Designer`对象，以及 Jack，他是`ProjectManager`对象。 | 聚合和组合 |
| `Designer`，`ProjectManager`和`Programmer`都基于并扩展了`Person`对象。 | 继承 |
| 你可以调用`Bob.talk()`，`Jill.talk()`和`Jack.talk()`方法，它们都能正常工作，尽管产生不同的结果。Bob 可能会更多地谈论性能，Jill 谈论美丽，Jack 谈论截止日期。每个对象都从 Person 继承了 talk 方法并对其进行了定制。 | 多态性和方法重写 |

# 设置你的培训环境

这本书在编写代码时采取了自助式的方法，因为我坚信真正学习编程语言的最佳方式是通过编写代码。没有现成的代码下载供你直接放入你的页面。相反，你应该输入代码，看看它是如何工作的，然后调整它并进行调试。在尝试代码示例时，鼓励你将代码输入 JavaScript 控制台。让我们看看你如何做到这一点。

作为开发人员，你很可能已经在你的系统上安装了许多网络浏览器，比如 Firefox，Safari，Chrome 或 Internet Explorer。所有现代浏览器都有一个 JavaScript 控制台功能，你将在整本书中使用它来帮助你学习和实验语言。更具体地说，这本书使用的是 WebKit 的控制台，它在 Safari 和 Chrome 中可用，但示例应该在任何其他控制台中工作。

## WebKit 的 Web 检查器

这个例子展示了你如何使用控制台输入一些代码，将 google.com 主页上的标志替换为你选择的图像。正如你所看到的，你可以在任何页面上实时测试你的 JavaScript 代码：

![WebKit 的 Web 检查器](img/image_01_001.jpg)

为了在 Chrome 或 Safari 中打开控制台，请在页面的任何位置右键单击，然后选择**检查元素**。弹出的附加窗口是 Web 检查器功能。选择**控制台**选项卡，然后您就可以开始了。

您可以直接在控制台中输入代码，当您按下*Enter*时，您的代码将被执行。代码的返回值将打印在控制台中。代码是在当前加载的页面的上下文中执行的，因此，例如，如果您键入`location.href`，它将返回当前页面的 URL。

控制台还具有自动完成功能。它的工作方式类似于操作系统的普通命令行提示或完整的 IDE 的自动完成功能。例如，如果您键入`docu`并按*Tab*或右箭头键，`docu`将自动完成为 document。然后，如果您键入`.`（点运算符），您可以遍历可以在`document`对象上调用的所有可用属性和方法。

通过使用上下箭头键，您可以浏览已执行命令的列表，并将它们带回控制台。

控制台只允许您输入一行，但您可以使用分号将多个 JavaScript 语句分开执行。如果您需要更多行，可以按*Shift* + *Enter*换行，而不立即执行结果。

## Mac 上的 JavaScriptCore

在 Mac 上，您实际上不需要浏览器；您可以直接从命令行**终端**应用程序中探索 JavaScript。

如果您以前从未使用过**终端**，您可以在**Spotlight 搜索**中简单搜索它。启动后，输入以下命令：

```js
 **alias jsc='/System/Library/Frameworks/JavaScriptCore.framework/
      Versions/Current/Resources/jsc'**

```

这个命令创建了一个别名，指的是 JavaScriptCore 的小应用程序，它是 WebKit 引擎的一部分。JavaScriptCore 与 Mac 操作系统一起发布。

您可以将先前显示的`alias`行添加到您的`~/.profile`文件中，这样当您需要时`jsc`就会一直在那里。

现在，为了启动交互式 shell，您只需从任何目录键入`jsc`。然后，您可以输入 JavaScript 表达式，当您按下**Enter**时，您将看到表达式的结果。看一下以下的屏幕截图：

![Mac 上的 JavaScriptCore](img/image_01_002.jpg)

## 更多控制台

所有现代浏览器都内置了控制台。您之前已经看到了 Chrome/Safari 控制台。在任何 Firefox 版本中，您都可以安装 Firebug 扩展，其中包含一个控制台。此外，在较新的 Firefox 版本中，有一个内置的控制台，可以通过**工具** | **Web 开发人员** | **Web 控制台**菜单访问。

![更多控制台](img/image_01_003-e1482735592253.jpg)

自 Internet Explorer 8 以来，它具有 F12 开发人员工具功能，其中包含**脚本**选项卡中的控制台。

熟悉`Node.js`也是一个好主意，您可以通过尝试它的控制台来开始。从[`nodejs.org`](http://nodejs.org)安装`Node.js`，并在命令提示符（终端）中尝试控制台：

![更多控制台](img/image_01_004.jpg)

正如您所看到的，您可以使用`Node.js`控制台尝试快速示例。但是，您也可以编写更长的 shell 脚本（屏幕截图中的`test.js`）并使用`scriptname.js`节点运行它们。

Node REPL 是一个强大的开发工具。当您在命令行上键入'node'时，REPL 会被调用。您可以在这个 REPL 上尝试 JavaScript：

```js
    node 
    > console.log("Hellow World"); 
    Hellow World 
    undefined 
    > a=10, b=10; 
    10 
    > console.log(a*b); 
    100 
    undefined 

```

# 总结

在本章中，您了解了 JavaScript 的诞生以及它的现状。您还了解了面向对象编程的概念，并看到 JavaScript 不是基于类的面向对象语言，而是基于原型的语言。最后，您学会了如何使用您的训练环境- JavaScript 控制台。现在，您已经准备好深入学习 JavaScript，并学习如何使用它强大的面向对象特性。不过，让我们从头开始。

下一章将指导您了解 JavaScript 中的数据类型（只有几种）、条件、循环和数组。如果您认为自己已经了解这些主题，可以随意跳过下一章，但在此之前，请确保您能够完成本章末尾的几个简短练习。
