# 前言

在过去的几年中，浏览器变得更加强大，并成为交付复杂应用程序和图形的平台。其中大部分是标准的 2D 图形。大多数现代浏览器已经采用了 WebGL，这使您不仅可以在浏览器中创建 2D 应用程序和图形，还可以利用 GPU 的功能创建美丽且性能良好的 3D 应用程序。

然而，直接编程 WebGL 非常复杂。您需要了解 WebGL 的内部细节，并学习复杂的着色器语言，以充分利用 WebGL。Three.js 围绕 WebGL 的功能提供了一个非常易于使用的 JavaScript API，因此您可以在不详细了解 WebGL 的情况下创建美丽的 3D 图形。

Three.js 提供了大量功能和 API，您可以使用它们直接在浏览器中创建 3D 场景。在本书中，您将通过大量互动示例和代码样本学习 Three.js 提供的所有不同 API。

# 本书涵盖的内容

第一章《使用 Three.js 创建您的第一个 3D 场景》介绍了开始使用 Three.js 所需的基本步骤。您将立即创建您的第一个 Three.js 场景，并在本章结束时，您将能够直接在浏览器中创建和动画化您的第一个 3D 场景。

第二章《构成 Three.js 场景的基本组件》解释了在使用 Three.js 时需要了解的基本组件。您将了解灯光、网格、几何图形、材质和摄像机。在本章中，您还将概述 Three.js 提供的不同光源和您可以在场景中使用的摄像机。

第三章《使用 Three.js 中可用的不同光源》深入探讨了您可以在场景中使用的不同光源。它展示了示例并解释了如何使用聚光灯、方向光、环境光、点光源、半球光和区域光。此外，它还展示了如何在光源上应用镜头眩光效果。

第四章《使用 Three.js 材质》讨论了 Three.js 中可用的可以在网格上使用的材质。它展示了您可以设置的所有属性，以配置用于特定用途的材质，并提供了可供在 Three.js 中使用的材质进行实验的交互式示例。

第五章《学习使用几何图形》是探索 Three.js 提供的所有几何图形的两章中的第一章。在本章中，您将学习如何在 Three.js 中创建和配置几何图形，并可以使用提供的交互式示例来尝试使用几何图形（如平面、圆形、形状、立方体、球体、圆柱体、圆环、圆环结和多面体）。

第六章《高级几何图形和二进制操作》延续了第五章《学习使用几何图形》的内容。它向您展示了如何配置和使用 Three.js 提供的更高级的几何图形，例如凸多边形和车削。在本章中，您还将学习如何从 2D 形状挤出 3D 几何图形，以及如何使用二进制操作组合几何图形来创建新的几何图形。

第七章，“粒子、精灵和点云”，解释了如何使用 Three.js 中的点云。您将学习如何从头开始创建点云以及从现有几何体创建点云。在本章中，您还将学习如何通过使用精灵和点云材质来修改单个点的外观方式。

第八章，“创建和加载高级网格和几何体”，向您展示了如何从外部来源导入网格和几何体。您将学习如何使用 Three.js 的内部 JSON 格式来保存几何体和场景。本章还解释了如何从格式如 OBJ、DAE、STL、CTM、PLY 等加载模型。

第九章，“动画和移动摄像机”，探讨了各种类型的动画，您可以使用它们使您的场景栩栩如生。您将学习如何与 Three.js 一起使用 Tween.js 库，以及如何使用基于变形和骨骼的动画模型。

第十章，“加载和使用纹理”，扩展了第四章，“使用 Three.js 材质”，在那里介绍了材质。在本章中，我们深入了解纹理的细节。本章介绍了各种可用的纹理类型以及如何控制纹理应用到网格上的方式。此外，在本章中，您将学习如何直接使用 HTML5 视频和画布元素的输出作为纹理的输入。

第十一章，“自定义着色器和渲染后处理”，探讨了如何使用 Three.js 对渲染的场景应用后处理效果。通过后处理，您可以对渲染的场景应用模糊、移轴、深褐色等效果。此外，您还将学习如何创建自己的后处理效果，并创建自定义的顶点和片段着色器。

第十二章，“向您的场景添加物理和声音”，解释了如何向 Three.js 场景添加物理效果。通过物理效果，您可以检测物体之间的碰撞，使它们对重力做出反应，并施加摩擦力。本章向您展示了如何使用 Physijs JavaScript 库来实现这一点。此外，本章还向您展示了如何向 Three.js 场景添加定位音频。

# 您需要为本书做好准备

您只需要一款文本编辑器（例如 Sublime）来玩弄示例，以及一款现代的网络浏览器来访问这些示例。一些示例需要本地网络服务器，但您将在第一章，“使用 Three.js 创建您的第一个 3D 场景”中学习如何设置一个非常轻量级的网络服务器，以便在本书中使用这些示例。

# 这本书是为谁准备的

这本书非常适合已经了解 JavaScript 并希望开始创建在任何浏览器中运行的 3D 图形的人。您不需要了解任何高级数学或 WebGL；所需的只是对 JavaScript 和 HTML 的一般了解。所需的材料和示例可以免费下载，本书中使用的所有工具都是开源的。因此，如果您想学习如何创建在任何现代浏览器中运行的美丽、交互式的 3D 图形，这本书就是为您准备的。

# 约定

在本书中，您将找到一些文本样式，用于区分不同类型的信息。以下是这些样式的一些示例及其含义的解释。

文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄都以以下方式显示：“您可以在这段代码中看到，除了设置`map`属性外，我们还将`bumpMap`属性设置为纹理。”

代码块设置如下：

```js
function createMesh(geom, imageFile, bump) {
  var texture = THREE.ImageUtils.loadTexture("../assets/textures/general/" + imageFile)
  var mat = new THREE.MeshPhongMaterial();
  mat.map = texture;
  var bump = THREE.ImageUtils.loadTexture("../assets/textures/general/" + bump)
  mat.bumpMap = bump;
  mat.bumpScale = 0.2;
  var mesh = new THREE.Mesh(geom, mat);
  return mesh;
}
```

当我们希望引起您对代码块的特定部分的注意时，相关行或项目会以粗体显示：

```js
var effectFilm = new THREE.FilmPass(0.8, 0.325, 256, false);
effectFilm.renderToScreen = true;

var composer4 = new THREE.EffectComposer(webGLRenderer);
**composer4.addPass(renderScene);**
composer4.addPass(effectFilm);
```

任何命令行输入或输出都以以下方式编写：

```js
**# git clone https://github.com/josdirksen/learning-threejs**

```

**新术语**和**重要单词**以粗体显示。您在屏幕上看到的单词，例如在菜单或对话框中，会以这样的方式出现在文本中：“您可以通过转到**首选项** | **高级**并勾选**在菜单栏中显示开发菜单**来完成此操作。”

### 注意

警告或重要说明会以这样的方式显示在一个框中。

### 提示

提示和技巧会以这样的方式出现。
