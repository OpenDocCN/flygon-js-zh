# 前言

JavaScript 是一种不拘小节但优雅的语言，它发现自己处于历史上最大的软件转变的中心。它现在是用于在最普遍的平台上提供用户体验的主要编程语言：网络。

这一巨大的责任意味着 JavaScript 语言不得不在不断变化的需求中迅速成熟起来。对于新兴的 JavaScript 程序员或 Web 开发人员来说，这些变化意味着语言及其生态系统变得越来越复杂。如今，可用的框架和库的数量之多令人不知所措，即使对于在这个行业工作多年的人也是如此。

本书的任务是剥开世界放在这种语言上的混乱层和概念，揭示其潜在的本质，并考虑如何利用它来编写可靠和可维护的代码，重点放在可用性上。我们将从放大并以非常基本的方式考虑为什么我们甚至编写代码开始。我们将发现我们编写的代码并不是独立存在的。我们将探讨我们的代码如何在很大和很小的方面极大地影响我们的用户和其他程序员，并讨论我们如何满足他们的各种需求。

除了对清洁编码原则的基本探索，我们还将深入研究 JavaScript 本身，引导您了解语言，从其最基本的语法到更抽象的设计模式和约定。我们还将探讨如何以最清洁的方式记录和测试我们的代码。您应该对 JavaScript 语言有扎实的掌握，并对清洁代码有敏锐的感觉。

# 这本书适合谁？

这本书适合所有对提高他们的 JavaScript 技能感兴趣的人。无论您是业余爱好者还是专业人士，本书都有一些方面对您有价值。在技术知识方面，本书假定读者有一些先前的编程经验，至少对 JavaScript 本身有一些经验。从这本书中获益最多的读者是那些在 JavaScript 中已经编程了几个月或几年，但一直感到被其复杂性压倒，并不确定如何编写干净且无 bug 的 JavaScript 的人。

# 本书涵盖的内容

第一章，“设定场景”，要求您考虑我们为什么编写代码，并探讨了我们通过代码传达意图的多种方式。本章为您提供了一个坚实的基础，您可以在此基础上建立和调整对清洁代码的理解。

第二章，“清洁代码的原则”，使用真实的 JavaScript 示例来探讨清洁代码的四个原则：可靠性、效率、可维护性和可用性。这些重要的原则为本书的其余部分奠定了基础。

第三章，“清洁代码的敌人”，揭示了一些臭名昭著的清洁代码的敌人。这些是导致不洁净代码泛滥的力量和动态，例如自我中心的编程、糟糕的度量和货物崇拜。

第四章，“SOLID 和其他原则”，探讨了著名的 SOLID 原则，并通过将它们与函数式编程原则、迪米特法则和抽象原则联系在一起，揭示了它们更深层的含义。

第五章，“命名是困难的”，讨论了编程中最具挑战性的方面之一：命名事物。它提出了一些命名的具体挑战，并将基础命名理论与现实命名问题和解决方案联系在一起。

第六章，“基本类型和内置类型”，开始深入探讨 JavaScript。本章详细介绍了 JavaScript 程序员可用的基本类型和内置类型，警告常见陷阱并分享最佳实践。

第七章，“动态类型”，讨论了 JavaScript 的动态特性，并介绍了与此相关的一些挑战。它解释了我们如何清晰地检测和转换各种类型（通过显式转换或隐式强制转换）。

第八章，“运算符”，详细介绍了 JavaScript 中可用的运算符，讨论了它们的行为和挑战。这包括对每个运算符的详细说明，以及示例、陷阱和最佳实践。

第九章，“语法和作用域的部分”，提供了对语言的更宏观的视角，突出了更广泛的语法和可用的构造，如语句、表达式、块和作用域。

第十章，“控制流”，广泛涵盖了控制流的概念，突出了命令式和声明式编程形式之间的关键区别。然后探讨了如何通过利用控制移动机制（如调用、返回、产出、抛出等）在 JavaScript 中清晰地控制流。

第十一章，“设计模式”，广泛探讨了 JavaScript 中一些更流行的设计模式。它描述了 MVC 和 MVVM 等主要架构设计模式，以及更模块化的设计模式，如构造器模式、类模式、原型模式和揭示模块模式。

第十二章，“现实世界的挑战”，探讨了 JavaScript 生态系统中一些更现实的问题领域，并考虑了如何清晰地处理这些问题。涵盖的主题包括 DOM 和单页面应用程序、依赖管理和安全性（XSS、CSRF 等）。

第十三章，“测试的景观”，描述了测试软件的广泛概念，以及如何将这些概念应用到 JavaScript 中。它特别探讨了单元测试、集成测试、端到端测试和 TDD。

第十四章，“编写清晰的测试”，进一步深入探讨了测试领域，建议您以完全清晰、直观、代表问题领域和概念上分层的方式编写断言和测试套件。

第十五章，“更干净代码的工具”，简要考虑了几种可用的工具和开发流程，可以极大地帮助我们编写和维护清洁的代码。包括诸如代码检查、格式化、源代码控制和持续集成等主题。

第十六章，“记录你的代码”，揭示了文档编写的独特挑战。本章要求您考虑所有可用的文档媒介，并要求您考虑如何理解和满足可能希望使用或维护我们的代码的个人的需求和问题。

第十七章，“其他人的代码”，探讨了在我们的 JavaScript 项目中选择、理解和利用第三方代码的挑战（如第三方库、框架和实用工具）。它还讨论了允许我们以清晰和最小侵入方式与第三方代码进行交互的封装方法。

第十八章，“沟通和倡导”，探讨了在编写和交付干净软件时固有的更广泛的基于项目和人际关系的挑战。这包括对以下内容的详细调查：规划和设置要求、沟通策略以及识别问题和推动变革。

第十九章，“案例研究”，通过对 JavaScript 项目的开发进行逐步讲解，包括客户端和服务器端的部分。本章将本书中的原则汇集起来，并通过让您接触到一个真实的问题领域和可用解决方案的开发来加以证实。

# 为了充分利用本书

为了更好地利用本书，有必要对 JavaScript 语言有基本的了解，并且至少有一种 JavaScript 使用平台的经验。例如，这可能包括浏览器或 Node.js。

为了执行本书中分享的代码片段，您有几种选择：

+   创建一个包含`<script>`的 HTML 文件，您可以在其中放置任何您想要测试的 JavaScript 代码。为了观察可视化输出，您可以使用`alert()`或`console.log()`。为了查看通过`console.log()`输出的值，您可以打开浏览器的开发工具。

+   直接打开任何现代浏览器的开发工具，并直接在 JavaScript 控制台中输入 JavaScript 表达式和语句。在 Chrome 浏览器中执行此操作的指南可以在这里找到：[`developers.google.com/web/tools/chrome-devtools/console/javascript`](https://developers.google.com/web/tools/chrome-devtools/console/javascript)。

+   创建一个`test.js`文件，并通过 Node.js 运行它，或者使用 Node.js REPL 来交互式地测试不同的 JavaScript 语句和表达式。有关开始使用 Node.js 的全面指南可以在这里找到：[`nodejs.org/en/docs/guides/getting-started-guide/`](https://nodejs.org/en/docs/guides/getting-started-guide/)。

浏览器开发工具可在所有现代浏览器中访问。快捷键如下：

+   **在 Chrome 中**：*Windows 上按 Ctrl + Shift + J*，*macOS 上按 CMD + Shift + J*

+   **在 Firefox 中**：*Windows 和 Linux 上按 Ctrl + Shift + I 或 F12*，*macOS 上按 CMD + OPTION + I*

+   **在 IE 中**：*Windows 上按 F12*

建议您按照自己的步调阅读本书，并在发现某个主题难以理解时，在网上进行额外的研究和探索。一些特别有用的资源包括以下内容：

+   Mozilla 开发者网络：[`developer.mozilla.org/en-US/docs/Web/JavaScript`](https://developer.mozilla.org/en-US/docs/Web/JavaScript)

+   ECMAScript 语言规范：[`www.ecma-international.org/publications/standards/Ecma-262.htm`](https://www.ecma-international.org/publications/standards/Ecma-262.htm)

随着您在书中的进展，书中的内容会变得越来越详细，因此在后面的章节中放慢步伐是很自然的。这对于*第 6-12 章*尤其如此，这些章节非常详细地介绍了 JavaScript 语言本身的特性。

# 下载示例代码文件

您可以从[www.packt.com](http://www.packt.com)的帐户中下载本书的示例代码文件。如果您在其他地方购买了本书，您可以访问[www.packtpub.com/support](https://www.packtpub.com/support)并注册，以便文件直接通过电子邮件发送给您。

您可以按照以下步骤下载代码文件：

1.  在[www.packt.com](http://www.packt.com)上登录或注册。

1.  选择“支持”选项卡。

1.  点击“代码下载”。

1.  在搜索框中输入书名，然后按照屏幕上的说明操作。

下载文件后，请确保使用以下最新版本的软件解压或提取文件夹：

+   Windows 系统使用 WinRAR/7-Zip

+   Mac 系统使用 Zipeg/iZip/UnRarX

+   7-Zip/PeaZip for Linux

该书的代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/Clean-Code-in-JavaScript`](https://github.com/PacktPublishing/Clean-Code-in-JavaScript)。如果代码有更新，将在现有的 GitHub 存储库上进行更新。

我们还有来自我们丰富书籍和视频目录的其他代码包，可在**[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)**上找到。去看看吧！

# 下载彩色图像

我们还提供了一个 PDF 文件，其中包含本书中使用的屏幕截图/图表的彩色图像。您可以在这里下载：[`static.packt-cdn.com/downloads/9781789957648_ColorImages.pdf`](https://static.packt-cdn.com/downloads/9781789957648_ColorImages.pdf)。

# 使用的约定

本书中使用了许多文本约定。

`CodeInText`：表示文本中的代码词，数据库表名，文件夹名，文件名，文件扩展名，路径名，虚拟 URL，用户输入和 Twitter 句柄。这是一个例子：“我们找到一个名为`shipping_address_validator`的公开可用的包，并决定使用它。”

代码块设置如下：

```js
function validatePostalCode(code) {
  return /^[0-9]{5}(?:-[0-9]{4})?$/.test(code);
}
```

任何命令行输入或输出都以以下方式编写：

```js
npm install --save react react-dom
```

**粗体**：表示一个新术语，一个重要的词，或者屏幕上看到的词。例如，菜单或对话框中的单词会以这种方式出现在文本中。这是一个例子：“对于我们的案例研究，植物名称只以它们的拉丁全名存在，其中包括一个科（例如，Acanthaceae）。”

警告或重要提示会以这种方式出现。提示和技巧会以这种方式出现。
