# 第九章：将所有内容放在一起

之前的章节为我们提供了设计和组装整个家庭系统的基础和元素，我们将在本章中进行研究。我希望我已经以相当结构化和逻辑的方式引导您进行了这次旅程，以便您已经准备好了。

作为构建整个系统的指南，在本章中，我们将指导您如何整合并给出一些将所有内容放在一起的想法，并为您提供最终的细节。然后，您可以使用我们在本章中提到的想法制作自己的项目。

在本章中，我们将涵盖以下主题：

+   整合系统-开发项目

+   使用矩阵键盘控制访问

+   将系统控制与继电器和设备集成

+   如何设置电源供应

# 整合系统-开发项目

在之前的章节中，我们已经看到了关于家庭自动化和家用电器控制和监控的不同项目。在本章中，我们将提供一些想法，开发一些可以在不同领域使用电子设备进行控制和监控的项目。

## 深入了解光传感器

正如其名称所示，“光敏电阻（LDR）”由一块暴露的半导体材料制成，例如硫化镉，当光照射到它时，它的电阻从黑暗中的几千欧姆变为只有几百欧姆，通过在材料中创建空穴-电子对。净效应是其导电性的改善，随着照明的增加，电阻减小。此外，光敏电池具有长时间的响应，需要多秒钟才能对光强度的变化做出反应。

在本节中，我们将看看如何使用光传感器来控制不同的设备：

+   需要时开关灯光

+   当传感器检测到房间内是否有光线时，调暗灯光

![深入了解光传感器](img/B05170_09_01.jpg)

可以使用信号传感器调暗灯光；根据光传感器测量的数据，可以调节其强度。

![深入了解光传感器](img/B05170_09_02.jpg)

## 运动传感器

运动传感器检测体热（红外能量）。被动红外传感器是家庭安全系统中最广泛使用的运动传感器。当您的系统处于武装状态时，您的运动传感器会被激活。一旦传感器变热，它就可以检测周围区域的热量和运动，形成一个保护网格。

如果移动物体阻挡了太多的网格区域，并且红外能量级别迅速变化，传感器就会触发。使用这个传感器，我们可以在需要时控制灯光的开关：

![运动传感器](img/B05170_09_03.jpg)

根据传感器测量的距离，它可以检测物体，因此您可以控制灯光：

![运动传感器](img/B05170_09_04.jpg)

## 自动光控制器

当您不在家时，或者当您告诉系统您不在家时，传感器会起作用。一些安全系统可以被编程，当检测到运动时通过安全摄像头记录事件。运动检测的主要目的是感应入侵者并向您的控制面板发送警报，从而向您的监控中心发出警报：

![自动光控制器](img/B05170_09_05.jpg)

以下电路图显示了自动光控制的连接，其中使用了之前使用的所有元素，如 LDR 传感器、PIR 传感器和继电器模块：

![自动光控制器](img/B05170_09_06.jpg)

# 太阳能电源监控电路

这里有另一个真实项目，显示了一个控制面板，将使用 Arduino 板监控太阳能电池板的能量。以下图表显示了传感器和太阳能电池板连接到 Arduino 板的连接：

![太阳能电源监控电路](img/B05170_09_07.jpg)

# 带土壤传感器的自动灌溉系统

在下图中，我们有另一个项目；我们正在整合以前使用过的工具。在这种情况下，我们将使用土壤传感器在有或无水时控制浇水：

![带土壤传感器的自动灌溉系统](img/B05170_09_08.jpg)

到目前为止，您已经看到了可以应用于真实情况的非常有趣和有价值的项目，涉及不同领域，如家庭、家庭自动化，甚至花园。在接下来的章节中，我们将看更多的项目。让我们开始吧！

# Arduino 水位控制器

在这个项目中，我们将制作一个自动水位传感器，使用您的 Arduino 板来控制水位，如下图所示：

![Arduino 水位控制器](img/B05170_09_09.jpg)

# 基于蓝牙的家庭自动化

在本节中，我们将看一个可以用于家庭自动化的项目，使用蓝牙模块进行通信，继电器模块和硬件集成作为软件工具来控制房屋中的设备。

下图显示了如何将继电器模块和 HC05 蓝牙模块连接到 Arduino 板：

![基于蓝牙的家庭自动化](img/B05170_09_10.jpg)

# 使用矩阵键盘控制访问

在本节中，我们将看如何使用矩阵键盘控制访问代码。在下图中，我们可以看到我们将使用的键盘：

![使用矩阵键盘控制访问](img/B05170_09_11.jpg)

## 键盘

在下图中，我们看到了与 Arduino 板的硬件连接。它们连接到数字引脚：

![键盘](img/B05170_09_12.jpg)

## 连接 LCD 屏幕显示代码

在下图中，我们展示了 LCD 屏幕与 Arduino 板的硬件连接：

![连接 LCD 屏幕显示代码](img/B05170_09_13.jpg)

我们已经看过一些有趣的项目，您可以通过添加新的传感器来控制其他设备。在下一节中，我们将看一个非常有趣的项目。准备好迈出下一步，这是一个很好的目标。

# 使用键盘控制门锁

在下图中，我们看到了一个带锁的键盘。这一部分可以与上一个项目合并。这个设备可以从您的 Raspberry Pi Zero 或 Arduino 板上进行控制：

![使用键盘控制门锁](img/B05170_09_14.jpg)

## 使用键盘访问的代码

您现在可以将代码复制到名为 Project_keyboard_Access_Control.ino 的文件中，或者只需使用 Arduino IDE 从此项目的文件夹中获取完整的代码：

```js
void captura() 
{ 
  tecla = customKeypad.getKey(); 

  if (tecla) 
  { 
    digito = digito + 1; 
    if(tecla==35){tecla=0;digito=0;valorf=0;lcd.setCursor(0,0);lcd.print(valorf);
      lcd.print("          ");}          
    if(tecla==48){tecla=0;} 
    if(tecla==42){tecla=0;digito=0;valor = valorf;} 

   if(digito==1){valorf1 = tecla; valorf=valorf1;lcd.setCursor(0,0);
       lcd.print(valorf);lcd.print("          ");}  
     if(digito==2){valorf2 = tecla+(valorf1*10);valorf=valorf2;lcd.setCursor(0,0);
         lcd.print(valorf);lcd.print("          ");} 
    if(digito==3){valorf3 = tecla+(valorf2*10);valorf=valorf3;lcd.setCursor(0,0);
         lcd.print(valorf);lcd.print("          ");} 
    if(digito==4){valorf4 = tecla+(valorf3*10);valorf=valorf4;lcd.setCursor(0,0);
         lcd.print(valorf);lcd.print("          ");} 
    if(digito==5){valorf5 = tecla+(valorf4*10);valorf=valorf5;lcd.setCursor(0,0);
        lcd.print(valorf);lcd.print("          ");digito=0;} 
  } 

```

此功能检查键入的代码是否正确：

```js
void loop() 
{ 
  captura(); 
  if (valor == 92828) 
  { 
    digitalWrite(lock,HIGH); 
  } 
  if (valor == 98372) 
  { 
    digitalWrite(lock,LOW); 
  } 
} 

```

# 集成系统控制与继电器和设备

在下图中，我们正在整合书中的重要部分。我们将展示使用继电器在房屋中的连接，以及如何应用和控制真实负载使用灯：

![集成系统控制与继电器和设备](img/B05170_09_15.jpg)

## 控制多个电器

在现实生活中，我们将看到连接并控制真实世界的设备。在下图中，我们可以看到可以控制电子部分负载的继电器模块：

![控制多个电器](img/B05170_09_16.jpg)

下图显示了最终电路。我们看到了与 Arduino 板的真实连接，以及它们如何控制真实世界。

![控制多个电器](img/B05170_09_17.jpg)

## 完整系统

在下图中，我们看到了控制家庭自动化系统中真实设备的最终电路。这可以在家中的所有区域使用，在每个房间中我们可以有一个继电器模块，与控制系统通信：

![完整系统](img/B05170_09_18.jpg)

# 如何设置电源供应

对于我们的系统，设置系统中将使用的电源非常重要。首先，我们需要确保 Arduino 的电压约为 5V。在下图中，我们展示了如何将电压配置为约 5 伏特：

![如何设置电源供应](img/B05170_09_19.jpg)

## 交流负载的电源供应

如果我们需要将交流负载连接到 Arduino 或树莓派 Zero 并建立工业控制系统，我们需要使用 24V 直流电压，如下电路图所示：

![交流负载的电源供应](img/B05170_09_20.jpg)

## 将 24V 直流继电器连接到 Arduino 板

在下图中，我们有了使用 24 伏特直流继电器控制交流负载的电路：

![将 24V 直流继电器连接到 Arduino 板](img/B05170_09_21.jpg)

我们有了最终电路，它代表了连接到 Raspberry Pi Zero 或 Arduino 板的数字引脚的接口，用于控制交流负载：这并不常见，但有必要学习如何将能够用 24 伏特直流通电的继电器连接到 Arduino 板：

![将 24V 直流继电器连接到 Arduino 板](img/B05170_09_22.jpg)

最后，我们在一个板上有了最终电路。我们使用了一个需要用 24 伏特通电的线圈的继电器。Arduino 或树莓派的数字输出可以连接到继电器模块。

# 摘要

这是书籍《JavaScript 物联网编程》的最后一章。在本章中，您将学习如何整合在项目中需要考虑的所有元素，当您想要将硬件和软件工具应用到我们展示的项目中时。这将帮助您继续开发自己的项目，遵循本书中分享的基础知识。
