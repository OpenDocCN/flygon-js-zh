# 前言

Cypress 是一个专门用于进行前端测试的 JavaScript 自动化测试框架。Cypress 在重新发明测试的执行方式方面表现出色，特别是对于现代 Web。与 Selenium WebDriver 等其他测试框架不同，Cypress 运行速度更快，因为它在浏览器中运行，并且与其他测试框架相比，学习曲线更低。

使用前端应用程序的开发人员将能够利用这本实用指南的知识，并在端到端测试中发展他们的技能。这本书采用了实践方法来实施和相关方法，让您可以立即投入运行并提高生产力。

# 这本书适合对象

这本书适合测试专业人士、软件和 Web 测试人员，以及精通 JavaScript 的 Web 开发人员，可能熟悉或不熟悉自动化测试的概念。前三章提供了一个快速入门指南，将帮助您熟悉 Cypress 的工作原理，以及如何开始，如果您是一个完全的 Cypress 新手。如果您是一个想要迁移到 Cypress 并发现其功能的 Selenium 测试人员，您会发现这本书非常有用。需要对 Web 测试和 JavaScript 有很好的理解。

# 这本书涵盖了什么

*第一章*，*安装和设置 Cypress*，带您了解使用 Cypress 的基本知识，包括安装 Cypress 包、默认配置和自定义设置。在本章中，您将了解 Cypress 的工作原理，它运行所需的模块，测试文件命名建议，以及如何开始使用 Cypress。了解 Cypress 的工作原理将确保您能够掌握 Cypress 的内部工作原理，并能够全面理解 Cypress 框架的结构，从而能够独立安装和设置后续项目。

*第二章*，*Selenium WebDriver 和 Cypress 之间的区别*，我们将探讨 Cypress 与 Selenium WebDriver 的不同之处，并突出选择 Cypress 运行端到端测试的一些优缺点。在本章中，我们还将探讨使 Cypress 比 Selenium 更适合测试的因素，以及用户如何扩展其功能。

*第三章*，*使用 Cypress 命令行工具*，让您了解不同的 Cypress 命令，您可以使用这些命令来执行 Cypress 命令。本章将解释如何运行命令，以及如何使用 Cypress 命令调试应用程序。

*第四章*，*编写您的第一个测试*，将带您使用 Cypress 编写您的第一个测试。我们将从一个通过的测试开始，以检查一切是否正常工作，然后转移到一个失败的测试，然后我们将看到 Cypress 的行为以及自动重新加载功能是如何工作的。在本章的第二部分，我们将专注于更高级的场景，让您了解如何正确编写 Cypress 测试。

*第五章*，*调试 Cypress 测试*，深入探讨了 Cypress 包含的不同类型的工具，以帮助调试应用程序。使用 Cypress 的调试工具，您将学会如何回溯到每个命令的快照，查看执行过程中发生的不同页面事件，并可视化不同命令以及元素隐藏和发现的时间。您还将学会如何在命令快照之间前进和后退，以及以迭代方式暂停和逐步执行命令快照。

*第六章*, *使用 TDD 方法编写 Cypress 测试*，向您介绍了**测试驱动开发**（**TDD**）的概念以及如何将其应用于编写 Cypress 测试。您将学习如何使用 TDD 方法编写测试，以及如何在尚未开发的应用程序中实际应用 TDD。

*第七章*, *了解 Cypress 中的元素交互*，介绍了如何与 DOM 的各种元素进行交互。本章还将教您如何与动画交互，如何悬停在元素上，以及如何检查元素是否被禁用。通过本章结束时，您将能够舒适地浏览 DOM 元素并为元素编写有意义的测试。

*第八章*, *了解 Cypress 中的变量和别名*，探讨了如何通过使用别名来处理异步命令。我们还将确定通过使用别名可以简化测试的方法。最后，我们将确定如何在路由和请求中使用别名。

*第九章*, *Cypress 测试运行器的高级用法*，介绍了如何利用 Cypress 测试运行器编写更好的测试。我们将重点放在仪表板和选择器工具上。我们将学习如何使用仪表板来理解间谍和存根的概念，以及 Cypress 如何解释它们。

*第十章*, *练习-导航和网络请求*，向您展示了实际示例和练习，旨在练习如何使用和进行网络请求的导航。该练习还将结合别名和变量的概念，以确保您能够链接本书第二部分学到的不同概念。

*第十一章*, *练习-存根和间谍 XHR 请求*，介绍了理解 XHR 请求以及 Cypress 如何帮助存根需要太长时间或者复杂以接收响应的请求。Cypress 的存根将对确保实施的测试不会出现问题以及我们可以获得自定义响应而不是等待请求的服务器响应非常重要。

*第十二章*, *Cypress 中的视觉测试*，介绍了 Cypress 中的视觉测试工作原理。我们将探讨视觉测试是什么，不同类型的测试，以及现代网络中视觉测试的重要性。我们还将研究视口以及它们如何影响视觉测试的过程，最后看看视觉测试自动化工具，如 Applitools 和 Percy，我们可以使用它们进行视觉验证。

# 为了充分利用本书

您需要一些 JavaScript 的理解，还需要在您的计算机上安装 Node.js 和 Yarn 和 npm 软件包管理器。所有给出的代码示例都在 macOS 上进行了测试，并且应该在所有 Linux 操作系统上都可以正常工作。对于 Windows 操作系统，特别是最后三章，请在*技术要求*部分的信息框中阅读有关如何在 Windows 上运行命令的附加说明。在撰写本文时，所有示例都已经使用 Cypress 版本 6.2.1 进行了测试。

![](img/B15616_Preface_Table_1_AM.jpg)

重要提示

在出版时，本书是基于 Cypress 版本 6.2.1 编写的，一些功能可能已经被破坏或废弃。请查看我们的 GitHub 存储库以获取最新的代码更新和更改。

**如果您使用的是本书的数字版本，我们建议您自己输入代码或通过 GitHub 存储库访问代码（链接在下一节中提供）。这样做将帮助您避免与复制和粘贴代码相关的潜在错误。**

*始终尝试练习；它们不仅仅是为了好玩，而是精心设计帮助您学习和掌握章节内容。*

# 下载示例代码文件

您可以从您在[www.packt.com](http://www.packt.com)的账户中下载本书的示例代码文件。如果您在其他地方购买了本书，您可以访问[www.packtpub.com/support](http://www.packtpub.com/support)并注册，以便文件直接通过电子邮件发送给您。

您可以按照以下步骤下载代码文件：

1.  登录或注册[www.packt.com](http://www.packt.com)。

1.  选择**支持**选项卡。

1.  点击**代码下载**。

1.  在**搜索**框中输入书名，然后按照屏幕上的说明操作。

下载文件后，请确保使用以下最新版本的解压缩或提取文件夹：

+   Windows 系统下使用 WinRAR/7-Zip

+   Mac 系统下使用 Zipeg/iZip/UnRarX

+   Linux 系统下使用 7-Zip/PeaZip

该书的代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/End-to-End-Web-Testing-with-Cypress`](https://github.com/PacktPublishing/End-to-End-Web-Testing-with-Cypress)。如果代码有更新，将在现有的 GitHub 存储库上进行更新。

我们还有来自我们丰富的书籍和视频目录的其他代码包，可在[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)上找到。去看看吧！

# 使用的约定

本书中使用了许多文本约定。

`文本中的代码`：表示文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名。例如："`cy.intercept()`命令监听 XHR 响应，并知道 Cypress 何时为特定的 XHR 请求返回响应。"

代码块设置如下：

```js
it('can wait for a comment response', () => {
      cy.request('https://jsonplaceholder.cypress.io/comments/6')
    .as('sixthComment');
      cy.get('@sixthComment').should((response) => {
        expect(response.body.id).to.eq(6)
    });
 });
```

任何命令行输入或输出都以以下方式编写：

```js
npm run cypress:open 
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词会以这种方式出现在文本中。例如："要做到这一点，在浏览器中打开浏览器控制台，然后点击**网络**选项卡，然后选择**XHR 过滤器**选项。"

提示或重要说明

看起来像这样。
